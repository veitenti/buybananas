function Ad(t){this._el=document.createElement("div"),this.frame=document.createElement("iframe"),this.frame.style.border="0",this.visible=!0,this.needsRefresh=!1;for(var e in defaults)void 0===t[e]&&(t[e]=defaults[e]);t.DEVICE_WIDTH||t.DEVICE_HEIGHT||(t.DEVICE_WIDTH=window.innerWidth,t.DEVICE_HEIGHT=window.innerHeight),"Interstitial"===t.TYPE?(t.DEVICE_WIDTH<t.DEVICE_HEIGHT?t.IS_INTERSTITIAL_AD=!0:(t.REQUIRED_WIDTH=300,t.REQUIRED_HEIGHT=250),t.FS=!0):"Rectangle"===t.TYPE&&(t.REQUIRED_WIDTH=300,t.REQUIRED_HEIGHT=250);var i=t.REFRESH_RATE||30;15>i&&(i=15),this.refreshRate=i;var s=["<html><head>","<base target='_blank' />","</head><body style='padding:0;margin:0;overflow:hidden;text-align:center;'>","<table style='width:100%;height:100%;padding:0;margin:0;border-collapse:collapse'><tr><td style='text-align: center; vertical-align: middle;padding:0'>","<input id='iaAdtruthCollectorInput' type='hidden' value='' />","<script src='http://cdn2.inner-active.mobi/wv-js/adtruth.js'></script>","<div id='iaAdPlaceholder'></div>","<script>ia = {}; ia.adSettings = "+JSON.stringify(t)+";</script>","<script src='http://cdn2.inner-active.mobi/wv-js/iaAdTagInternal.min.js' type='text/javascript'></script>","</td></tr></table>","<script>document.body.addEventListener('click', function () { setTimeout(function() { parent.postMessage('click', '*'); }, 100); }, false);","window.addEventListener('message',function(e){if(e.data=='refresh')location.reload();},false);","</script>","Interstitial"===t.TYPE?"<script>window.onload = function () { document.getElementById('ad').style.margin = 'auto'; };</script>":"","Banner"===t.TYPE?"<script>window.onload = function () { var ad = document.getElementById('ad'); ad && parent.postMessage('resize:' + ad.width + ',' + ad.height, '*') };</script>":"","</body></html>"];if(t.FS){this.setSize(t.DEVICE_WIDTH,t.DEVICE_HEIGHT);var n=document.createElement("a");n.textContent="close",n.style.cssText="position: absolute; right: 3px; top: 3px; z-index: 1000; color: white"+(t.CLOSE_STYLE||""),n.onclick=function(){this.remove()}.bind(this),this._el.appendChild(n),this.closeBtn=n}else t.REQUIRED_WIDTH&&t.REQUIRED_HEIGHT?this.setSize(t.REQUIRED_WIDTH,t.REQUIRED_HEIGHT):"Banner"===t.TYPE&&this.setSize(320,50);setTimeout(function(){this.frame.src="data:text/html;charset=utf-8,"+s.join(" ")}.bind(this),0),this.frame.style.overflow="hidden",this.frame.style.background=t.BG_COLOR,this.frame.setAttribute("scrolling","no"),window.addEventListener("message",function(e){if("click"===e.data)t.FS?this.remove():this.needsRefresh=!0;else if(0===e.data.indexOf("resize:")){var i=e.data.substr(7).split(",");this.setSize(+i[0],+i[1])}}.bind(this),!1),this._el.appendChild(this.frame),"Banner"===t.TYPE&&this.placement("top","center"),this.startTimer(),document.addEventListener("blur",function(){this.visible=!1,this.stopTimer()}.bind(this),!1),document.addEventListener("focus",function(){this.visible=!0,this.startTimer(),this.needsRefresh&&this.refreshAd()}.bind(this),!1),document.addEventListener("mozvisibilitychange",function(){this.visible=!document.mozHidden,this.needsRefresh&&this.visible&&this.refreshAd(),this.visible?this.startTimer():this.stopTimer()}.bind(this),!1)}var defaults={PORTAL:8471,IS_ORMMA_SUPPORT:!1,IS_MRAID_SUPPORT:!1,CATEGORY:"",KEYWORDS:"",GPS_COORDINATES:"",LOCATION:"",IS_MOBILE_WEB:!0,IMEI_MD5:"",IMEI_SHA1:"",MAC_MD5:"",MAC_SHA1:"",UDID_MD5:"",UDID_SHA1:"",IMSI_MD5:"",IMSI_SHA1:"",ANDROID_ID_MD5:"",ANDROID_ID_SHA1:"",IDFA:"",IDFV:"",AGE:"",GENDER:"",DEVICE_WIDTH:"",DEVICE_HEIGHT:"",MOBILE_NETWORK_CODE:"",MOBILE_COUNTRY_CODE:"",NETWORK:"",OPTIONAL_WIDTH:"",OPTIONAL_HEIGHT:"",REQUIRED_WIDTH:"",REQUIRED_HEIGHT:"",BG_COLOR:"black"};Ad.prototype={startTimer:function(){null==this.interval&&(this.interval=setInterval(function(){this.visible&&this.refreshAd()}.bind(this),1e3*this.refreshRate))},stopTimer:function(){"number"==typeof this.interval&&(clearInterval(this.interval),this.interval=null)},setSize:function(t,e){return this.frame.width=t,this.frame.height=e,(this.placeVertical||this.placeHorizontal)&&this.placement(this.placeVertical,this.placeHorizontal),this},placement:function(t,e){switch(this.frame.style.position="fixed",t&&(this.placeVertical=t),e&&(this.placeHorizontal=e),this.frame.style.top=this.frame.style.left=this.frame.style.bottom=this.frame.style.right="",t){case"bottom":this.frame.style.bottom="0px";break;case"top":this.frame.style.top="0px";break;case"center":case"centre":var i=(window.innerHeight-this.frame.height)/2;this.frame.style.top=Math.floor(i)+"px"}switch(e){case"left":this.frame.style.left="0px";break;case"right":this.frame.style.right="0px";break;case"center":case"centre":var i=(window.innerWidth-this.frame.width)/2;this.frame.style.left=Math.floor(i)+"px"}return this},addTo:function(t){return this._el.parentNode&&this._el.parentNode.removeChild(this._el),t.appendChild(this._el),this},refresh:function(){this.placement(this.placeVertical,this.placeHorizontal)},refreshAd:function(){this.frame.contentWindow.postMessage("refresh","*"),this.needsRefresh=!1},show:function(){this.refreshAd(),this._el.style.display="block",this.visible=!0},hide:function(){this._el.style.display="none",this.visible=!1},remove:function(){this.interval&&clearInterval(this.interval),this._el.parentNode.removeChild(this._el)}};var Inneractive={createAd:function(t){return new Ad(t)}};